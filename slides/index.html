<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Statistics in Python with R, Liang Bo Wang</title>
    <meta name="viewport" content="width=792, user-scalable=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <!-- Icon -->
    <link href="pics/favicon.png" rel="icon" type="image/x-icon" />

    <!-- MathJax -->
    <!-- CSS Stle -->
    <link rel="stylesheet" href="lib/shower/themes/ribbon/styles/screen.css">
    <link rel="stylesheet" href="lib/highlight/styles/tomorrow.css" type="text/css"/>
    <style type="text/css" media="all">

        /* clean table */
        table.clean td img {
            vertical-align: top;
        }
        table.clean td {
            background: none;
        }

        h2.tighter {
            margin: -40px 0 20px;
        }

        /* tighter paragraph */
        p.tighter {
            margin: 0 0 25px;
        }

        /* tighter code */
        pre.tighter {
            margin: 0 0 20px;
        }

        pre.full-page {
            margin: -60px 0 0;
        }
        /* inline */
        p.inline {
            margin-bottom: 0px;
        }

        ul.tighter {
            margin-bottom: 25px;
        }

        /* smaller code */
        pre.small code {
            font-size: 16px;
            line-height: 2em;
        }

        .grey {
          color: #BBB;
        }
        .red {
          color: #D91A3C;
        }
        .blue {
          color: #0376A6;
        }

        /* source link */
        div.ref-img p.src-link {
            position: relative;
            font-size: 14px;
            text-align: right;
            bottom: 10px;
            right: 10px;
        }

        /* two column slides */
        section.slide.twocol div.left {
            width: 50%;
            float: left;
        }
        section.slide.twocol div.right {
            width: 50%;
            float: right;
        }

        section.slide.twocol-ll div.left {
            width: 65%;
            float: left;
        }
        section.slide.twocol-ll div.right {
            width: 35%;
            float: right;
        }

        section.slide.twocol-lr div.left {
            width: 35%;
            float: left;
        }
        section.slide.twocol-lr div.right {
            width: 65%;
            float: right;
        }
    </style>

</head>
<body class="list">
    <!-- Header in overview -->
    <header class="caption">
        <div style="overflow: auto; vertical-align: middle; position: relative;">
            <img style="float: left; padding-right: 30px; width: 150px;" src="pics/pyconapac_logo.png" alt="">
            <div style="">
                <h1>
                    Statistics in Python with R
                </h1>
                <p style="line-height: 32px; padding-top:15px;">Liang Bo Wang (亮亮), 2014-05-16</p>
                <p style="line-height: 32px;">From Taiwan R User Group, more info on <a href="http://www.meetup.com/Taiwan-R/" target="_blank">Meetup</a>.</p>
            </div>
        </div>
    </header>
    <!-- START OF SLIDE CONTENT -->

    <!-- Cover slide -->
    <section id="cover" class="slide cover w"><div>
        <h3>PyCon APAC 2014/TW, 2014-05-16</h3>
        <h2>Statistics in Python with R</h2>
        <p>
            <a href="http://about.me/lbwang" target="_blank">Liang Bo Wang (亮亮)</a><br>CC 4.0 BY
        </p>
        <p id="usage-instr">
            <kbd>Esc</kbd> to overview <br />
            <kbd>←</kbd> <kbd>→</kbd> to navigate
        </p>
        <img src="pics/cover.jpg" alt="">
    </div>
    <style>
        #cover h2 {
            margin: 40px 0 0px;
            color: #D91A3C;
            text-align: center;
            font-size: 84px;
            line-height: 1.2em;
            opacity: 0.8;
        }
        #cover h3 {
            margin: -80px 0 0px;
            color: #0376A6;
            text-align: center;
            font-size: 32px;
            opacity: 0.3;
        }
        #cover p {
            margin: 50px 0 0;
            text-align: center;
            color: #FFFA20;
            font-size: 32px;
            opacity: 0.8;
        }
        #cover p a {
            color: #FFFA20;
        }
        #usage-instr {
            position: absolute;
            text-align: right;
            right: 30px;
            bottom: 20px;
        }
        #usage-instr kbd {
            opacity: 0.8;
            color: #D91A3C;
        }
        #cover .src-link {
            position: absolute;
            font-size: 14px;
            text-align: right;
            bottom: 10px;
            right: 10px;
        }
        #cover img {
            opacity: 1;
        }
    </style>
    </section>

    <section id="about-me" class="slide"><div>
        <h2>About Me</h2>
        <ul>
            <li>Master student at <br />
                Bioinfo &amp; Biostat Core Lab, NTU CGM</li>
            <li>R / Python</li>
            <li>Try to learn how to speak DNA</li>
            <li>Taiwan R co-organizer</li>
            <li>PyCon APAC 2014/TW staff</li>
        </ul>
        <img id="protrait" src="pics/me.jpg" alt="">
    </div>
    <style>
        #protrait {
            position: absolute;
            right: 120px;
            top: 120px;
        }
    </style>
    </section>

    <section id="toc" class="slide"><div>
      <h2>Today's Topic</h2>
      <ul>
        <li>Why Python / R? Thoughts about data analysis and statistics</li>
        <li>Statistics in Python (overview)
          <ul>
            <li><i class="red">scipy.stats</i> - probability distribution and utils <span class="grey">(or d__, p__, r__ in R)</span></li>
            <li><i class="red">patsy</i> - model description <span class="grey">(or formula() in R)</span></li>
            <li><i class="red">statsmodel</i> - statistical analysis <span class="grey">(or lm(), glm() ... in R)</span></li>
          </ul>
        </li>
        <li><i class="red">rpy2</i> - R-powered Python</li>
        <li>Demo - survival analysis and family similarity in SNPs</li>
      </ul>
    </div></section>

    <section id="view-point" class="slide"><div>
      <h2>Today's Viewpoint</h2>
      <p class="main blue"><i>From a Python developer and R user</i></p>
      <ul id="py-user" class="next">
        <li>Write own packages</li>
        <li>Know how Python works roughly</li>
        <li>While lack of knowing the implementation details</li>
      </ul>
      <ul id="r-user" class="next">
        <li>Use R for specific purpose</li>
        <li>View R's internal as a black box</li>
        <li>How most statisticians use R</li>
      </ul>
    </div><style>
      #view-point .main {
        text-align: center;
        font-size: 36px;
        position: absolute;
        top: 300px;
      }
      #py-user {
        position: absolute;
        top: 380px;
        left: 220px;
      }
      #r-user {
        position: absolute;
        top: 160px;
        left: 550px;
      }
    </style></section>

    <section id="py-r-war" class="slide"><div>
      <h2 class="tighter">War between Python and R ... really?</h2>
      <p class="tighter">Not the case in Taiwan. We got Python talks in R user group!</p>
      <img src="pics/MLDM_pyevent.png" width="100%" alt="">
    </div></section>

    <section id="mldm-monday" class="slide"><div>
      <p>and PyCon APAC even recognized us as well</p>
      <img src="pics/pycon_question.png" width="100%" alt="">
      <p>Some said we are <i>R at cover but Python under the skin</i> (hmm...) <span class="red">Noooope!</span></p>
    </div></section>

  <section id="why-r" class="slide"><div>
    <h2>Why R?</h2>
    <ul class="tighter">
      <li>When it comes to <i>serious</i> statistics, people think of R, SAS, SPSS and Stata. And new method (e.g. on JASA and Biometrika) often ships with a R package.</li>
      <li>R is designed for statistics. Python is learning from all R's good parts (pandas for R's data.frame; patsy for R's formula)</li>
    </ul>
    <figure>
      <blockquote>
        <p>It's hard to ignore the wealth of statistical packages available in R/CRAN ...</p>
      </blockquote>
      <figcaption>Python as a statistics workbench, <a href="http://stats.stackexchange.com/questions/1595">Stack Exchange</a></figcaption>
    </figure>
  </div></section>

  <section id="why-python" class="slide"><div>
    <h2>Why Python (or maybe not R)?</h2>
    <ul>
      <li>You should know the answer otherwise you wouldn't come here!</li>
      <li>R is hard to learn (more functional, multiple OO systems, ...)</li>
      <li>R is not designed for general tasks</li>
      <li>Python is easier to optimize (Cython, cffi, ...)</li>
      <li>Better at data preprocessing, networking, and many other aspects</li>
    </ul>
    <p class="next">Some above are myths about R. Please read <i><a href="http://blog.datascienceretreat.com/post/69789735503/r-the-good-parts">R: the Good Parts</a></i>.</p>
  </div></section>

    <section id="stat-is-about" class="slide"><div>
      <h2 class="tighter">Before we start to speak statistics</h2>
      <p class="tighter">Statistics is about</p>
      <ul>
        <li class="next"><i class="red">Not</i> merely mean and variance <span class="grey">(also known as descriptive statistics)</span></li>
        <li class="next"><i class="red">Sampling</i> and finding representative samples <span class="grey">(otherwise, biased)</span></li>
        <li class="next"><i class="red">Modeling</i> for the specific data structure</li>
        <li class="next"><i class="red">Avoid over fitting</i> or complicated models <span class="grey">(model simplification)</span></li>        
        <li class="next"><i class="red">Insights</i> about data's mean and variance <span class="grey">(or domain knowledge)</span></li>
      </ul>
      <figure class="next">
        <blockquote>
          <p>Essentially, all models are wrong, but some are useful.</p>
        </blockquote>
        <figcaption>George E. P. Box (1987)</figcaption>
      </figure>
    </div><style>
      #stat-is-about ul {
        margin-bottom: 25px;
      }
    </style></section>

	<section id="ipy-cover" class="slide cover w" ><div>
        <h2>Statistics<br>in Python</h2>
		<img src="pics/mid.jpg" alt="">
    </div>
    <style>
        #ipy-cover h2 {
            margin: 0px 0 0px;
            color: #D91A3C;
            text-align: left;
            font-size: 100px;
            line-height: 1.2em;
            opacity: 0.8;
            position: absolute;
            top: 80px;
            left: 60px;
        }
    </style>
    </section>

  <section id="python-ecosystem" class="slide"><div>
    <h2>Python Ecosystem for Scientific Computing</h2>
    <ul class="tighter">
      <li>Python 3.4 (give it a try!)</li>
      <li>Numpy 1.8, Scipy 0.13, Matplotlib 1.3.1</li>
      <li>pandas 0.13+</li>
      <li>IPython (Notebook) 2.0</li>
      <li>Cython 0.20</li>
      <li class="blue">(needed for this talk) patsy 0.2.1, statsmodel 0.6dev, rpy2 2.4dev</li>
    </ul>
    <p>Vagrantfile in repo can setup a Ubuntu 14.04 with above packages.</p>
  </div></section>

  <section id="prob-dist" class="slide"><div>
    <h2>Probability Distribution</h2>
    <p class="tighter">Under <span class="red">scipy.stats</span>. Take Normal distribution as example, it is <code>norm</code>. More on <a href="http://docs.scipy.org/doc/scipy/reference/tutorial/stats.html">Scipy stats tutorial</a>.</p>
    <pre class="language-python3">
<code>from scipy.stats import norm
rv = norm(loc=0, scale=1)  # fix the shape of Normal dist.
rv.cdf(0)  # 0.5 = Pr(X ≤ 0)
rv.pdf(-np.Inf)  # 0 = f(X = -Inf)
rv.rvs(size=10)  # generate 10 random variables
</code>
    </pre>
  </div></section>

  <section id="patsy-model" class="slide"><div>
    <h2 class="tighter">Model construction by <span class="red">patsy</span></h2>
    <p class="tighter">A powerful formula-like statement. Provide data transformation by custom function.</p>
    <pre class="language-python3">
<code>from patsy import dmatrices, dmatrix, demo_data
data = demo_data("a", "x1", "x2", "y", min_rows=20)
# generate a dict-like structure
{'a': ['a1', 'a2'],
 'x2': array([ 0.97873798,  2.2408932 ]),
 'x1': array([ 1.76405235,  0.40015721]),
 'y': array([ 1.86755799, -0.97727788])}</code>
    </pre>
  </div></section>

  <section id="patsy-model-contd" class="slide"><div>
    <pre class="language-python3 full-page small">
<code># Y depends on x1 and interaction between a and x2
In [2]: dmatrices("y ~ x1 + a:x2", data=data)  # syntax similar to R
Out[2]: # specify LHS = RHS two DesignMatrices
(DesignMatrix with shape (2, 1)
          y
    1.86756
   -0.97728
   Terms:
     'y' (column 0),
 DesignMatrix with shape (2, 4)
   Intercept       x1  a[a1]:x2  a[a2]:x2
           1  1.76405   0.97874   0.00000
           1  0.40016   0.00000   2.24089
   Terms:
     'Intercept' (column 0)
     'x1' (column 1)
     'a:x2' (columns 2:4))</code>
    </pre>
  </div></section>

  <section id="patsy-transform" class="slide"><div>
    <pre class="language-python3 full-page">
<code>In [3]:
dmatrix("I(x1 * x2) + np.log(x2 + 10)", data)
Out[3]:
DesignMatrix with shape (2, 3)
  Intercept  I(x1 * x2)  np.log(x2 + 10)
          1     1.72655          2.39596
          1     0.89671          2.50478
  Terms:
    'Intercept' (column 0)
    'I(x1 * x2)' (column 1)
    'np.log(x2 + 10)' (column 2)</code>
    </pre>
    <p class="more">More on <a href="http://patsy.readthedocs.org/en/latest/quickstart.html">patsy quickstart</a></p>
  </div><style>
    #patsy-transform .more {
      position: absolute;
      text-align: right;
      bottom: 50px;
      right: 100px;
    }
  </style></section>

  <section id="statsmodel-fit" class="slide"><div>
    <h2 class="tighter">Model fitting by <span class="red">statsmodel</span></h2>
    <p class="tighter">Like <code>glm(), lm()</code> in R. To run Generalized Linear Model(GLM), one can supply the model's formula and data previously constructed in patsy. More on <a href="http://statsmodels.sourceforge.net/devel/examples/index.html#glm">statsmodel homepage</a>.</p>
    <pre class="language-python3">
<code>import statsmodels.api as sm
import statsmodels.formula.api as smf
mod1 = smf.glm(
    formula="y ~ x1 + x2", data=data, 
    family=sm.families.Gaussian(sm.families.links.identity)
).fit()</code></pre>
  </div></section>

  <section id="statsmodel-contd" class="slide"><div>
    <pre class="language-python3 full-page small">
<code>mod1.summary()
                 Generalized Linear Model Regression Results
==============================================================================
Dep. Variable:                      y   No. Observations:                   20
Model:                            GLM   Df Residuals:                       17
Model Family:                Gaussian   Df Model:                            2
Link Function:               identity   Scale:                  0.862442022663
Method:                          IRLS   Log-Likelihood:                -25.274
Date:                Sat, 17 May 2014   Deviance:                       14.662
Time:                        03:13:52   Pearson chi2:                     14.7
No. Iterations:                     3
==============================================================================
                 coef    std err          t      P&gt;|t|      [95.0% Conf. Int.]
------------------------------------------------------------------------------
Intercept     -0.5220      0.250     -2.088      0.037        -1.012    -0.032
x1             0.2262      0.245      0.923      0.356        -0.254     0.707
x2            -0.0342      0.175     -0.195      0.846        -0.378     0.310
==============================================================================
</code></pre>
  </div></section>

  <section id="py-further" class="slide"><div>
    <h2>What's Python also good at</h2>
    <ul>
      <li>Heavy computation - <span class="blue">Theano</span> (GPU computation)</li>
      <li>Simulation - <span class="blue">PyMC</span> (MCMC simulation)</li>
    </ul>
  </div></section>


  <section id="" class="slide"><div>
  </div></section>

    <!-- End Slide -->
    <section id='end' class='slide cover shout w'><div>
        <h2>Thank You!</h2>
        <img src="pics/end.jpg" alt="">
    </div>
    <style>
        #end h2 {
            position: absolute;
            text-align: left;
            top: 300px;
            left: 50px;
            color: #0376A6;
            font-size: 92px;
            opacity: 0.9;
        }
    </style></section>

    <!-- END OF SLIDE CONTENT -->
    <p class="badge"><a href="https://github.com/ccwang002/2014-handy-dist-computing" target="_blank">Fork me on Github</a></p>
    <div class="progress"><div></div></div>

    <!-- Library -->
    <script src="lib/highlight/highlight.pack.js" type="text/javascript" charset="utf-8"></script>
    <script>
        hljs.initHighlightingOnLoad();
    </script>
    <script src="lib/shower/shower.min.js"></script>
    <!-- Mathjax -->
    <!-- During local development, use localhost mathjax for speed-->
    <script src="file:///Users/liang/.ipython/profile_default/static/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- online Mathjax CDN -->
    <!--
    <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    -->
    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-42219381-5', 'ccwang002.github.io');
      ga('require', 'displayfeatures');
      ga('send', 'pageview');
    </script>
</body>
</html>
